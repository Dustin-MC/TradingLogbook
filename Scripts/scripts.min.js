var orderHistory=null,currentSection=0,hideMenu=!0,chartsRef=[];document.addEventListener("DOMContentLoaded",()=>{let e=localStorage.getItem("theme");0==e?ChangeThemeMode(0,!1):1==e?ChangeThemeMode(1,!1):localStorage.setItem("theme",2)}),window.onload=function(){if(null!=localStorage.getItem("themeColors")){let e=localStorage.getItem("themeColors").split(","),t=document.querySelectorAll(".customColor");for(let o=0;o<t.length;o++)t[o].value=e[o]}localStorage.setItem("orderH",JSON.stringify([0,-2,0,2,0])),null!=localStorage.getItem("orderH")&&(orderHistory=[],JSON.parse(localStorage.getItem("orderH")).forEach(e=>{orderHistory.push(e)}),GenerateChartsData())};{function HideMenu(e){e?document.querySelector(".nav__body").classList.add("display--n"):document.querySelector(".nav__body").classList.remove("display--n")}document.querySelector(".navToggler").onclick=function(){document.querySelector(".nav__body").classList.toggle("display--n")}}{let e=document.querySelectorAll(".section"),t=document.querySelectorAll(".nav__item"),o=document.querySelectorAll(".btn--section");function ToggleSection(t){currentSection!=t?(e[t].classList.toggle("display--n"),e[currentSection].classList.toggle("display--n"),currentSection=t,hideMenu&&HideMenu(!0)):alert("Current section!")}for(let e=0;e<t.length;e++)if(e<4)t[e].onclick=function(){ToggleSection(e)};else{if(4==e)continue;t[e].onclick=function(){ToggleSection(e-1)}}for(let e=0;e<o.length;e++)o[e].onclick=function(){ToggleSection(e+1)}}{let e=document.querySelector(":root"),t=document.querySelectorAll(".customColor"),o=getComputedStyle(e),r=document.querySelectorAll(".btn--theme");function TemporalThemeMode(){r[3].disabled=!0;let o=[getComputedStyle(e).getPropertyValue("--mainColor"),getComputedStyle(e).getPropertyValue("--secondColor"),getComputedStyle(e).getPropertyValue("--color1"),getComputedStyle(e).getPropertyValue("--color2")];e.style.setProperty("--mainColor",t[0].value),e.style.setProperty("--secondColor",t[1].value),e.style.setProperty("--color1",t[2].value),e.style.setProperty("--color2",t[3].value),setTimeout(function(){e.style.setProperty("--mainColor",o[0]),e.style.setProperty("--secondColor",o[1]),e.style.setProperty("--color1",o[2]),e.style.setProperty("--color2",o[3]),r[3].removeAttribute("disabled")},4e3)}function ChangeThemeMode(r,l=!0,n=!1){if(localStorage.setItem("theme",r),0==r)if(l)e.style.setProperty("--mainColor",t[0].value),e.style.setProperty("--secondColor",t[1].value),e.style.setProperty("--color1",t[2].value),e.style.setProperty("--color2",t[3].value),localStorage.setItem("themeColors",[t[0].value,t[1].value,t[2].value,t[3].value]),null!=orderHistory&&GenerateCharts();else{let o=localStorage.getItem("themeColors").split(",");if(n)for(let e=0;e<t.length;e++)t[e].value=o[e];e.style.setProperty("--mainColor",o[0]),e.style.setProperty("--secondColor",o[1]),e.style.setProperty("--color1",o[2]),e.style.setProperty("--color2",o[3])}else 1==r?(e.style.setProperty("--mainColor",o.getPropertyValue("--themeColor2")),e.style.setProperty("--secondColor",o.getPropertyValue("--themeColor1"))):(e.style.setProperty("--mainColor",o.getPropertyValue("--themeColor1")),e.style.setProperty("--secondColor",o.getPropertyValue("--themeColor2"))),e.style.setProperty("--color1",o.getPropertyValue("--themeColor3")),e.style.setProperty("--color2",o.getPropertyValue("--themeColor4")),l&&null!=orderHistory&&GenerateCharts()}r[0].onclick=function(){ChangeThemeMode(0)},r[1].onclick=function(){ChangeThemeMode(1)},r[2].onclick=function(){ChangeThemeMode(2)},r[3].onclick=function(){TemporalThemeMode()}}{let e=document.querySelector(".excelInput"),t=document.querySelector(".dataFormat");async function ImportData(){let o=[];try{if("bingx"==t.value){let t=await readXlsxFile(e.files[0]);for(let e=2;e<t.length;e++){let r=[t[e][2],t[e][3],t[e][4],t[e][5],t[e][6],t[e][7],t[e][8],ConvertToUTC(t[e][12]),ConvertToUTC(t[e][13]),t[e][14],t[e][15],t[e][16]];o.push(JSON.stringify(r))}AddNewOperations(o)}else if("tohsg"==t.value){let t=e.files[0],r=new FileReader;r.readAsText(t),r.onload=function(){try{t.name.includes("theme")?(localStorage.setItem("themeColors",r.result),ChangeThemeMode(0,!1,!0),null!=orderHistory&&GenerateCharts()):(JSON.parse(r.result).forEach(e=>{o.push(JSON.stringify(e))}),AddNewOperations(o))}catch(e){console.log("TOHSG error\n",e),alert("Action not completed! \n\tTry again or Select another file.")}}}}catch(e){console.log("BingX error\n",e),alert("Action not completed! \n\tTry again or Select another file.")}}function AddNewOperations(e){let t=[];null==orderHistory&&(orderHistory=[]),orderHistory.forEach(e=>{t.push(JSON.stringify(e))}),e.forEach(e=>{t.includes(e)||(t.push(e),orderHistory.push(JSON.parse(e)))}),localStorage.setItem("orderH",JSON.stringify(orderHistory)),GenerateChartsData(),alert("Action success!\n\tOrder history data imported")}function ConvertToUTC(e,t=!0){let o;if(e=e.toJSON(),t){let t=e.slice(0,4),r=Number(e.slice(5,7)),l=e.slice(8,10),n=e.slice(11,13),a=e.slice(14,16),c=e.slice(17,19);utcDiference=8,o=new Date(Date.UTC(t,r-1,l,n-utcDiference,a,c)).toJSON()}else o=new Date(e).toJSON();return o}function ExportData(){let e,t,o,r=!1;if("theme"==$dataExport.value?0==localStorage.getItem("theme")?(r=!0,t="themeMode",e=localStorage.getItem("themeColors")):alert("Action bloqued!\n\tThere is currently no custom theme selected."):"tohsg"==$dataExport.value&&(null!=orderHistory?(t="data",r=!0,e=JSON.stringify(orderHistory)):alert("Action blocked!\n\tThere is currently no existing data to export.")),r){o=new Date,o=`${o.getFullYear()}.${o.getMonth()+1}.${o.getDate()}`;let r=document.createElement("a"),l=new Blob([e],{type:"octect/stream"}),n=window.URL.createObjectURL(l);r.href=n,r.download=`TOHSG_${t}_${o}.txt`,r.click(),window.URL.revokeObjectURL(n)}}$exportBtn=document.querySelector(".btn--exportData"),$dataExport=document.querySelector(".dataExport"),e.addEventListener("change",function(){"none"!=t.value?ImportData():alert("No format selected!\n\tA format is required to perform data import."),this.value=""}),$exportBtn.addEventListener("click",function(){"none"!=$dataExport.value?ExportData():alert("Action bloqued!\n\tSelect some data to export.")})}{let e=document.querySelectorAll(".chart");function GenerateChartsData(){GenerateCharts()}function GenerateCharts(){let t=[];if(0!=localStorage.getItem("theme")){let e=document.querySelector(":root");t=[getComputedStyle(e).getPropertyValue("--secondColor"),getComputedStyle(e).getPropertyValue("--color1"),getComputedStyle(e).getPropertyValue("--color2")]}else t=localStorage.getItem("themeColors").split(","),t.shift();null!=chartsRef[0]&&chartsRef[0].destroy(),chartsRef[0]=new Chart(e[0],{type:"line",data:{labels:[1,2,3,4,5],datasets:[{label:"Dataset sample label",data:orderHistory,borderColor:t[0],fill:{target:"origin",above:t[1],below:t[2]}}]}})}}