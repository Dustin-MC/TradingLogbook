{var currentSection=2,hideMenu=!0;function RoundNumber(e,t=2){return Number(e.toFixed(t))}chartsRef=[],orderHistory=null,document.addEventListener("DOMContentLoaded",()=>{let e=localStorage.getItem("theme");0==e?ChangeThemeMode(0,!1):1==e?ChangeThemeMode(1,!1):localStorage.setItem("theme",2)}),window.onload=function(){if(null!=localStorage.getItem("themeColors")){let e=localStorage.getItem("themeColors").split(","),t=document.querySelectorAll(".customColor");for(let o=0;o<t.length;o++)t[o].value=e[o]}null!=localStorage.getItem("orderH")&&(orderHistory=[],JSON.parse(localStorage.getItem("orderH")).forEach(e=>{orderHistory.push(e)}),GenerateChartsData())}}{function HideMenu(e){e?document.querySelector(".nav__body").classList.add("display--n"):document.querySelector(".nav__body").classList.remove("display--n")}document.querySelector(".navToggler").onclick=function(){document.querySelector(".nav__body").classList.toggle("display--n")}}{let e=document.querySelectorAll(".section"),t=document.querySelectorAll(".nav__item"),o=document.querySelectorAll(".btn--section");function ToggleSection(t){currentSection!=t?(e[t].classList.toggle("display--n"),e[currentSection].classList.toggle("display--n"),currentSection=t,hideMenu&&HideMenu(!0)):alert("Current section!")}for(let e=0;e<t.length;e++)if(e<4)t[e].onclick=function(){ToggleSection(e)};else{if(4==e)continue;t[e].onclick=function(){ToggleSection(e-1)}}for(let e=0;e<o.length;e++)o[e].onclick=function(){ToggleSection(e+1)}}{let e=document.querySelector(":root"),t=document.querySelectorAll(".customColor"),o=getComputedStyle(e),r=document.querySelectorAll(".btn--theme");function TemporalThemeMode(){r[3].disabled=!0;let o=[getComputedStyle(e).getPropertyValue("--mainColor"),getComputedStyle(e).getPropertyValue("--secondColor"),getComputedStyle(e).getPropertyValue("--color1"),getComputedStyle(e).getPropertyValue("--color2")];e.style.setProperty("--mainColor",t[0].value),e.style.setProperty("--secondColor",t[1].value),e.style.setProperty("--color1",t[2].value),e.style.setProperty("--color2",t[3].value),setTimeout(function(){e.style.setProperty("--mainColor",o[0]),e.style.setProperty("--secondColor",o[1]),e.style.setProperty("--color1",o[2]),e.style.setProperty("--color2",o[3]),r[3].removeAttribute("disabled")},4e3)}function ChangeThemeMode(r,l=!0,a=!1){if(localStorage.setItem("theme",r),0==r)if(l)e.style.setProperty("--mainColor",t[0].value),e.style.setProperty("--secondColor",t[1].value),e.style.setProperty("--color1",t[2].value),e.style.setProperty("--color2",t[3].value),localStorage.setItem("themeColors",[t[0].value,t[1].value,t[2].value,t[3].value]),null!=orderHistory&&GenerateCharts();else{let o=localStorage.getItem("themeColors").split(",");if(a)for(let e=0;e<t.length;e++)t[e].value=o[e];e.style.setProperty("--mainColor",o[0]),e.style.setProperty("--secondColor",o[1]),e.style.setProperty("--color1",o[2]),e.style.setProperty("--color2",o[3])}else 1==r?(e.style.setProperty("--mainColor",o.getPropertyValue("--themeColor2")),e.style.setProperty("--secondColor",o.getPropertyValue("--themeColor1"))):(e.style.setProperty("--mainColor",o.getPropertyValue("--themeColor1")),e.style.setProperty("--secondColor",o.getPropertyValue("--themeColor2"))),e.style.setProperty("--color1",o.getPropertyValue("--themeColor3")),e.style.setProperty("--color2",o.getPropertyValue("--themeColor4")),l&&null!=orderHistory&&GenerateCharts()}r[0].onclick=function(){ChangeThemeMode(0)},r[1].onclick=function(){ChangeThemeMode(1)},r[2].onclick=function(){ChangeThemeMode(2)},r[3].onclick=function(){TemporalThemeMode()}}{let e=document.querySelector(".excelInput"),t=document.querySelector(".dataFormat");async function ImportData(){let o=[];try{if("bingx"==t.value){let t=await readXlsxFile(e.files[0]);for(let e=2;e<t.length;e++){let r=[t[e][2],t[e][3],t[e][4],t[e][5],t[e][6],t[e][7],null,ConvertDate(t[e][12]),ConvertDate(t[e][13]),t[e][14]];"long"==t[e][8]?r[6]=!0:r[6]=!1,o.push(JSON.stringify(r))}AddNewOperations(o)}else if("tohsg"==t.value){let t=e.files[0],r=new FileReader;r.readAsText(t),r.onload=function(){try{t.name.includes("theme")?(localStorage.setItem("themeColors",r.result),ChangeThemeMode(0,!1,!0),null!=orderHistory&&GenerateCharts()):(JSON.parse(r.result).forEach(e=>{o.push(JSON.stringify(e))}),AddNewOperations(o))}catch(e){console.log("TOHSG error\n",e),alert("Action not completed! \n\tTry again or Select another file.")}}}}catch(e){console.log("BingX error\n",e),alert("Action not completed! \n\tTry again or Select another file.")}}function AddNewOperations(e){let t=[];null==orderHistory&&(orderHistory=[]),orderHistory.forEach(e=>{t.push(JSON.stringify(e))}),e.forEach(e=>{t.includes(e)||(t.push(e),orderHistory.push(JSON.parse(e)))}),localStorage.setItem("orderH",JSON.stringify(orderHistory)),GenerateChartsData(),alert("Action success!\n\tOrder history data imported")}function ConvertDate(e,t=!0){let o;if(e=e.toJSON(),t){let t=e.slice(0,4),r=Number(e.slice(5,7)),l=e.slice(8,10),a=e.slice(11,13),n=e.slice(14,16),s=e.slice(17,19);utcDiference=8,o=new Date(Date.UTC(t,r-1,l,a-utcDiference,n,s)).toJSON()}else o=new Date(e).toJSON();return o=o.slice(0,-5).replace("T"," "),o}function ExportData(){let e,t,o,r=!1;if("theme"==$dataExport.value?0==localStorage.getItem("theme")?(r=!0,t="themeMode",e=localStorage.getItem("themeColors")):alert("Action bloqued!\n\tThere is currently no custom theme selected."):"tohsg"==$dataExport.value&&(null!=orderHistory?(t="data",r=!0,e=JSON.stringify(orderHistory)):alert("Action blocked!\n\tThere is currently no existing data to export.")),r){o=new Date,o=`${o.getFullYear()}.${o.getMonth()+1}.${o.getDate()}`;let r=document.createElement("a"),l=new Blob([e],{type:"octect/stream"}),a=window.URL.createObjectURL(l);r.href=a,r.download=`TOHSG_${t}_${o}.txt`,r.click(),window.URL.revokeObjectURL(a)}}$exportBtn=document.querySelector(".btn--exportData"),$dataExport=document.querySelector(".dataExport"),e.addEventListener("change",function(){"none"!=t.value?ImportData():alert("No format selected!\n\tA format is required to perform data import."),this.value=""}),$exportBtn.addEventListener("click",function(){"none"!=$dataExport.value?ExportData():alert("Action bloqued!\n\tSelect some data to export.")})}{let e=document.querySelectorAll(".chart"),t={};function GenerateChartsData(){let e,o,r,l,a=orderHistory.length,n=0,s=0,i=0,u=0,c=0,d=0,g=0,p=0,y=0,h=0,m=0,f=0,C=0,S=0,v=0,b=0,P=0,A=0,N=0,R=0,T=0;t.profitsEvolution=[[],[]],t.efectivity=[["TP %","SL %","BE %"],[]],t.profitAverage=[["TP $","SL $","BE $"],[]],t.directionalAverage=[["Long %","Short %"],[]],t.directionalProfits=[["Longs $","Shorts $"],[]],t.longsAverage=[["TP %","SL %","BE %"],[]],t.shortsAverage=[["TP %","SL %","BE %"],[]],t.longsAverageProfits=[["TP $","SL $","BE $"],[]],t.shortsAverageProfits=[["TP $","SL $"],[]],orderHistory.forEach((E,$)=>{{let l=E[5]/E[4]-1;1!=E[6]&&(l*=-1),e=RoundNumber(l*(E[2]*E[3])),o=new Date(E[7]+"z"),o=`${o.getMonth()+1}.${o.getDate()}`,r=e,0!=$&&(r+=t.profitsEvolution[1][t.profitsEvolution[1].length-1]),t.profitsEvolution[0].push(o),t.profitsEvolution[1].push(r)}l=E[2]*E[3]/100,e>l?n++:e<0?s++:i++,$+1==a&&(t.efectivity[1].push(RoundNumber(100*n/a)),t.efectivity[1].push(RoundNumber(100*s/a)),t.efectivity[1].push(RoundNumber(100*i/a))),e>l?u+=e:e<0?c+=e:d+=e,$+1==a&&(t.profitAverage[1].push(RoundNumber(u/n)),t.profitAverage[1].push(RoundNumber(c/s)),t.profitAverage[1].push(RoundNumber(d/i))),E[6]?(g++,y+=e):(p++,h+=e),$+1==a&&(t.directionalAverage[1].push(RoundNumber(g/a*100)),t.directionalAverage[1].push(RoundNumber(p/a*100)),t.directionalProfits[1].push(RoundNumber(y/g)),t.directionalProfits[1].push(RoundNumber(h/p))),E[6]?e>l?(m++,S+=e):e<0?(f++,v+=e):(C++,b+=e):e>l?(P++,R+=e):e<0?(A++,T+=e):N++,$+1==a&&(t.longsAverage[1].push(RoundNumber(m/g*100)),t.longsAverage[1].push(RoundNumber(f/g*100)),t.longsAverage[1].push(RoundNumber(C/g*100)),t.shortsAverage[1].push(RoundNumber(P/p*100)),t.shortsAverage[1].push(RoundNumber(A/p*100)),t.shortsAverage[1].push(RoundNumber(N/p*100)),t.longsAverageProfits[1].push(RoundNumber(S/m)),t.longsAverageProfits[1].push(RoundNumber(v/f)),t.longsAverageProfits[1].push(RoundNumber(b/C)),t.shortsAverageProfits[1].push(RoundNumber(R/P)),t.shortsAverageProfits[1].push(RoundNumber(T/A)))}),GenerateCharts()}function GenerateCharts(){let o=[];if(0!=localStorage.getItem("theme")){let e=document.querySelector(":root");o=[getComputedStyle(e).getPropertyValue("--secondColor"),getComputedStyle(e).getPropertyValue("--color1"),getComputedStyle(e).getPropertyValue("--color2")]}else o=localStorage.getItem("themeColors").split(","),o.shift();e.forEach((e,r)=>{let l=e.dataset.name,a=t[l];null!=chartsRef[r]&&chartsRef[r].destroy(),"line"==e.dataset.type?chartsRef[r]=new Chart(e,{type:"line",data:{labels:a[0],datasets:[{data:a[1],pointBackgroundColor:o[0],borderColor:o[0],fill:{target:"origin",above:o[1],below:o[2]}}]},options:{scales:{x:{grid:{display:!1},ticks:{color:o[0]}},y:{grid:{color:o[0]},ticks:{color:o[0]}}},plugins:{legend:{display:!1}}}}):"circle"==e.dataset.type?chartsRef[r]=new Chart(e,{type:"doughnut",data:{labels:a[0],datasets:[{data:a[1],hoverOffset:4,borderWidth:2,borderColor:o[0],backgroundColor:[o[1],o[2],o[0]]}]},options:{layout:{padding:4},plugins:{legend:{display:!1}}}}):"semiCircle"==e.dataset.type?chartsRef[r]=new Chart(e,{type:"doughnut",data:{labels:a[0],datasets:[{data:a[1],circumference:180,rotation:-90,hoverOffset:4,borderWidth:2,borderColor:o[0],backgroundColor:[o[1],o[2],o[0]]}]},options:{layout:{padding:4},plugins:{legend:{display:!1}}}}):"bar"==e.dataset.type&&(chartsRef[r]=new Chart(e,{type:"bar",data:{labels:a[0],datasets:[{data:a[1],borderWidth:2,borderColor:o[0],backgroundColor:[o[1],o[2],o[0]]}]},options:{scales:{y:{grid:{color:o[0]},ticks:{color:o[0]}},x:{grid:{display:!1},ticks:{color:o[0]}}},plugins:{legend:{display:!1}}}}))})}}